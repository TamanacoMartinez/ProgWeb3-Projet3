<div class="flex-container">

  <form class="example-form" #forfaitFormAjout="ngForm">
      <h3><b>Nom du forfait :</b></h3>
      <mat-form-field class="example-full-width">
        <mat-label>Nom du forfait :</mat-label>
        <input matInput placeholder="Ex. Nom du forfait 1"  minlength="5" maxlength="50" name="nom" required
         [(ngModel)]="forfait.nom" #nom="ngModel" (keyup.enter)="addForfait(forfaitFormAjout)">
      </mat-form-field>
      <mat-error *ngIf="nom.invalid && (nom.dirty || nom.touched) && nom.hasError('required')">
        Le nom est obligatoire.
      </mat-error>
      <mat-error *ngIf="nom.invalid && (nom.dirty || nom.touched) && nom.hasError('minlength')">
        Le nom doit contenir au moins 5 caractères.
      </mat-error>
      <mat-error *ngIf="nom.invalid && (nom.dirty || nom.touched) && nom.hasError('maxlength')">
        Le nom doit contenir au maximum 50 caractères.
      </mat-error>
    
      <mat-form-field class="example-full-width">
        <mat-label>Description :</mat-label>
        <textarea matInput placeholder="Ex. Description du forfait 1"  maxlength="100" name="description" required
          [(ngModel)]="forfait.description" #description="ngModel" (keyup.enter)="addForfait(forfaitFormAjout)">
        </textarea>
      </mat-form-field>
      <mat-error *ngIf="description.invalid && (description.dirty || description.touched) && description.hasError('required')">
        La description est obligatoire.
      </mat-error>
      <mat-error *ngIf="description.invalid && (description.dirty || description.touched) && nom.hasError('maxlength')">
        La description doit contenir au maximum 100 caractères.
      </mat-error>

      <mat-form-field class="example-full-width">
        <mat-label>Code :</mat-label>
        <input matInput placeholder="Ex. ABC001" minlength="6" maxlength="6" name="code" required
         [(ngModel)]="forfait.code" #code="ngModel" (keyup.enter)="addForfait(forfaitFormAjout)">
      </mat-form-field>
      <mat-error *ngIf="code.invalid && (code.dirty || code.touched) && code.hasError('required')">
        Le code est obligatoire.
      </mat-error>
      <mat-error *ngIf="code.invalid && (code.dirty || code.touched) && code.hasError('minlength')">
        Le code doit contenir au moins 6 caractères.
      </mat-error>
      <mat-error *ngIf="code.invalid && (code.dirty || code.touched) && code.hasError('maxlength')">
        Le code doit contenir au maximum 6 caractères.
      </mat-error>

      <h3><b>Établissement :</b></h3>
      <mat-form-field class="example-full-width">
        <mat-label>Nom de l'établissement :</mat-label>
        <input matInput placeholder="Nom de l'établissement" name="nom_etablissement" maxlength="30" required
         [(ngModel)]="forfait.etablissement.nom_etablissement" #nom_etablissement="ngModel"> 
      </mat-form-field>
      <mat-error *ngIf="nom_etablissement.invalid && (nom_etablissement.dirty || nom_etablissement.touched) && nom_etablissement.hasError('required')">
        Le nom de l'établissement est obligatoire.
      </mat-error>
      <mat-error *ngIf="nom_etablissement.invalid && (nom_etablissement.dirty || nom_etablissement.touched) && nom_etablissement.hasError('maxlength')">
        Le nom de l'établissement doit contenir au maximum 30 caractères.
      </mat-error>

      <mat-form-field class="example-full-width">
          <mat-label>Description :</mat-label>
          <textarea matInput placeholder="Description" name="description_etablissement" minlength="5" maxlength="100" required
           [(ngModel)]="forfait.etablissement.description_etablissement" #description_etablissement="ngModel">
          </textarea>
      </mat-form-field>
      <mat-error *ngIf="description_etablissement.invalid && (description_etablissement.dirty || description_etablissement.touched) && description_etablissement.hasError('required')">
        La description de l'établissement est obligatoire.
      </mat-error>
      <mat-error *ngIf="description_etablissement.invalid && (description_etablissement.dirty || description_etablissement.touched) && description_etablissement.hasError('maxlength')">
        La description de l'établissement doit contenir au maximum 100 caractères.
      </mat-error>  
  
      <h3><b>Coordonnées :</b></h3>
      <mat-form-field class="example-full-width">
        <mat-label>Adresse :</mat-label>
        <input matInput placeholder="Adresse" name="adresse" maxlength="50" required
        [(ngModel)]="forfait.etablissement.coordonnees.adresse" #adresse="ngModel"> 
      </mat-form-field>
      <mat-error *ngIf="adresse.invalid && (adresse.dirty || adresse.touched) && adresse.hasError('required')">
        L'adresse de l'établissement est obligatoire.
      </mat-error>
      <mat-error *ngIf="adresse.invalid && (adresse.dirty || adresse.touched) && adresse.hasError('maxlength')">
        L'adresse l'établissement doit contenir au maximum 50 caractères.
      </mat-error>  

      
      <mat-form-field class="example-full-width">
        <mat-label>Ville :</mat-label>
        <input matInput placeholder="Ville" name="ville" maxlength="30" required 
        [(ngModel)]="forfait.etablissement.coordonnees.ville" #ville="ngModel">
      </mat-form-field>
      <mat-error *ngIf="ville.invalid && (ville.dirty || ville.touched) && ville.hasError('required')">
        Le nom de la ville est obligatoire.
      </mat-error>
      <mat-error *ngIf="ville.invalid && (ville.dirty || ville.touched) && ville.hasError('maxlength')">
        Le nom de la ville doit contenir au maximum 50 caractères.
      </mat-error>  
      
      <mat-form-field class="example-full-width">
        <mat-label>Téléphone :</mat-label>
        <input matInput placeholder="Téléphone" type="tel" name="telephone" required
        [(ngModel)]="forfait.etablissement.coordonnees.telephone" #telephone="ngModel">
      </mat-form-field>
      <mat-error *ngIf="telephone.invalid && (telephone.dirty || telephone.touched) && telephone.hasError('required')">
        Le numéro de téléphone est obligatoire. 
      </mat-error>
     
      
      <mat-form-field class="example-full-width">
        <mat-label>Courriel :</mat-label>
        <!-- <input matInput placeholder="Courriel" type="email" name="courriel" pattern="/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/" -->
        <input matInput placeholder="Courriel" type="email" name="courriel" required
         [(ngModel)]="forfait.etablissement.coordonnees.courriel" #courriel="ngModel">
      </mat-form-field>
      <mat-error *ngIf="courriel.invalid && (courriel.dirty || courriel.touched) && courriel.hasError('required')">
        Le courriel est obligatoire. 
      </mat-error>
      
      <mat-form-field class="example-full-width">
        <mat-label>Site Web :</mat-label>
        <input matInput placeholder="Site Web" name="site_web" maxlength="100" required
         [(ngModel)]="forfait.etablissement.coordonnees.site_web" #site_web="ngModel">
      </mat-form-field>
      <mat-error *ngIf="site_web.invalid && (site_web.dirty || site_web.touched) && site_web.hasError('required')">
        Le site web est obligatoire.
      </mat-error>
      <mat-error *ngIf="site_web.invalid && (site_web.dirty || site_web.touched) && site_web.hasError('maxlength')">
        Le site web doit contenir au maximum 100 caractères.
      </mat-error>

      <h3><b>Date :</b></h3>
      <mat-form-field appearance="fill">
        <mat-label>Date de début : / </mat-label>
        <mat-label>Date de fin :</mat-label>
        <mat-date-range-input [rangePicker]="picker">
          <input matStartDate placeholder="Date de début" name="date_debut" required
           [(ngModel)]="forfait.date_debut" #date_debut="ngModel" (keyup.enter)="addForfait(forfaitFormAjout)">
          <input matEndDate placeholder="Date de fin" name="date_fin" required
           [(ngModel)]="forfait.date_fin" #date_fin="ngModel" (keyup.enter)="addForfait(forfaitFormAjout)">
        </mat-date-range-input>
        <mat-hint>MM/DD/YYYY – MM/DD/YYYY</mat-hint>
        <mat-datepicker-toggle matIconSuffix [for]="picker"></mat-datepicker-toggle>
        <mat-date-range-picker #picker></mat-date-range-picker>
      </mat-form-field>
      <mat-error *ngIf="date_debut.invalid && (date_debut.dirty || date_debut.touched) && date_debut.hasError('required')">
        La date de début est obligatoire.
      </mat-error>
      <mat-error *ngIf="date_fin.invalid && (date_fin.dirty || date_fin.touched) && date_fin.hasError('required')">
        La date de fin est obligatoire.
      </mat-error>
  
    <section class="example-section">
      <mat-checkbox class="example-margin" name="premium"
       [(ngModel)]="forfait.premium" #premium="ngModel" (keyup.enter)="addForfait(forfaitFormAjout)">Premium
      </mat-checkbox>
    </section>

      <h3><b>Prix :</b></h3>
      <mat-form-field class="example-full-width">
        <mat-label>Prix</mat-label>
        <input matInput placeholder="00" type="number" min="1" value="00.00" step=".01"  name="prix" required  
         [(ngModel)]="forfait.prix" #prix="ngModel" (keyup.enter)="addForfait(forfaitFormAjout)">
      </mat-form-field>
      <mat-error *ngIf="prix.invalid && (prix.dirty || prix.touched) && prix.hasError('min')">
        Le prix doit être supérieur à 0.
      </mat-error><br>

      <mat-form-field class="example-full-width">
        <mat-label>Nouveau prix</mat-label>
        <input matInput placeholder="00" type="number" min="0" value="00.00" step=".01" name="nouveau_prix" 
         [(ngModel)]="forfait.nouveau_prix" #nouveau_prix="ngModel" (keyup.enter)="addForfait(forfaitFormAjout)">  
      </mat-form-field>


    <app-formulaire-avis></app-formulaire-avis>


      <div>
        <button *ngIf="forfait.id; else boutonAjout" mat-button mat-aria-label="Modifier"
          [disabled]="!forfaitFormAjout.form.valid" (click)="updateForfait(forfaitFormAjout)">Modifier</button>
          <ng-template #boutonAjout>
            <button mat-button mat-aria-label="Ajouter"
            [disabled]="!forfaitFormAjout.form.valid" (click)="addForfait(forfaitFormAjout)">
            Créer
            </button>
          </ng-template>
        <button mat-button mat-aria-label="Annuler" (click)="annuler()">
          Annuler
        </button>
 

      </div>
  </form>

</div>
